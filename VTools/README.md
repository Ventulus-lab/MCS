# 微风的工具库
本模组旨在为游戏《觅长生》的其他模组提供前置工具

## VTools
对于C#模组，可以直接调用VTools的方法。<br>
对于xLua，应该可以通过CS.VTools来调用方法。（还未测试）<br>
（待补充具体方法）

## VNext
扩展补充Next模组的**对话指令**、**触发器**、**环境指令(运行时脚本)**，来帮助模组作者们更方便地编写剧情类模组。

## VNext.DialogEvent
**对话指令**

|指令|说明|特点|范例|
|---|---|---|---|
| **SendNewEmail** | SendNewEmail*联系人id#邮件内容#发送日期#邮件类型id#物品id#物品数量#过期月数 <br>联系人id为数字，必填 <br>邮件内容 为字符串，必填 <br>发送日期可留空可省略，则默认为当前游戏内时间。仅为显示，实际是立即发送的，格式为DateTime转化的字符串格式 <br>邮件类型id可省略，默认为0表示不带物品，1表示NPC向玩家发送物品，2表示NPC向玩家请求物品 <br>物品id可省略，默认为0，当邮件类型id为1或2时有效且必填 <br>物品数量可省略，默认为0，当邮件类型id为1或2时有效且必填 <br>过期月数可省略，默认为60，是指当邮件类型id为2时，月数内NPC回复“正是我急需”，超过月数则“已取得替代物”  | 联系人和发信人必定一致，可选择是否携带物品或请求物品 <br>无论发多少封不同内容的邮件，都只占用对白表id100000号 | `"SendNewEmail*609#啊这。。（脸红）"` 倪旭欣发送带一句话的邮件 <br>`"SendNewEmail*609#那个，我有东西要送给你##1#5211#1"` 倪旭欣发送带一个丹药物品的邮件 |
| **SendOldEmail** | SendOldEmail*联系人id#发信人id#邮件内容#发送日期 <br> 联系人id为数字，必填 <br>发信人id为数字，必填 <br>邮件内容 为字符串，必填 <br>发送日期可留空可省略，则默认为当前游戏内时间。 | 联系人和发信人可不相同，形成类似“群聊”的效果，不可携带物品，不可带任务。每有一个发信人需占用一个传音符id100000 + SenderNPCid | `"SendOldEmail*609#2#你小子看上我们姑娘了吧？"` 魏老在联系人倪旭欣下发信 <br>`"SendOldEmail*609#621#小子你又皮痒了是吧？"` 倪振东在联系人倪旭欣下发信 |
| **SendNTaskEmail** | SendNTaskEmail*联系人id#委托任务id#邮件内容#发送日期#是否强制刷新 <br> 联系人id为数字，必填 <br>委托任务id为数字，必填 <br>邮件内容 为字符串，必填 <br>发送日期可留空可省略，则默认为当前游戏内时间。 <br>是否强制刷新为布尔类型，可省略，默认为false <br>游戏内的任务分为**传闻任务**（主线支线）和**委托任务**（可反复接取完成） <br>本邮件可实现玩家点击邮件就发放委托任务。需要作者在《task》配置文件中事先查阅好NTaskid，委托任务包括主城委托、宗门委托、随机副本、天机阁情报等等。 <br>“任务大类”表中Id即为NTaskid，发邮件前会随机生成子任务，即按照“详细任务随机范围”去“详细任务”表中按类型进行匹配，不强制刷新的意思是上次随机生成后还在cd中就不再次生成 <br>**【注意】** 子任务有“境界区间”要求，有可能恰好玩家的境界没有任何一个子任务时符合的，就会生成子任务失败，不会发送邮件 | 可实现玩家点击邮件就发放委托任务。每有一个委托任务id需占用一个传音符id200000 + NTaskid |`"If*[&GetLevel()>1&]#SendNTaskEmail*609#150#对了！我想邀请你一起去除妖！"` 当玩家境界高于练气初期时，给玩家发放“除妖”委托任务。经查表，此任务的子任务“境界区间”要求其他都有就是没有1级 |

## VNext.DialogTrigger
**触发器**
待补充

## VNext.DialogEnvQuery
**环境指令(运行时脚本)**

|指令|说明|特点|范例|
|---|---|---|---|